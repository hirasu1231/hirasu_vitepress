import{_ as l,c as o,j as n,G as e,w as p,ag as i,B as r,o as d}from"./chunks/framework.BDI6Vt0-.js";const u=JSON.parse('{"title":"QGIS3で兵庫県の「DSM」から標高で色分けした地図を描画する","description":"兵庫県がオープンデータで「DSM」を公開しているので，QGISで標高で色分けした地図を描画します．．QGISのversionは3.18です．","frontmatter":{"title":"QGIS3で兵庫県の「DSM」から標高で色分けした地図を描画する","description":"兵庫県がオープンデータで「DSM」を公開しているので，QGISで標高で色分けした地図を描画します．．QGISのversionは3.18です．","date":"2021-04-21T00:00:00.000Z","category":["GIS"],"tags":["QGIS3","3D","DSM","GIS"]},"headers":[],"relativePath":"posts/GIS_01.md","filePath":"posts/GIS_01.md"}'),c={name:"posts/GIS_01.md"};function _(h,a,g,S,b,m){const s=r("CallInArticleAdsense"),t=r("ClientOnly");return d(),o("div",null,[a[0]||(a[0]=n("p",null,"兵庫県がオープンデータで「DSM」を公開しているので，QGISで標高で色分けした地図を描画します．",-1)),a[1]||(a[1]=n("p",null,"QGISのversionは3.18です．",-1)),e(t,null,{default:p(()=>[e(s)]),_:1}),a[2]||(a[2]=i(`<h2 id="_1-dsmとは" tabindex="-1">１：DSMとは <a class="header-anchor" href="#_1-dsmとは" aria-label="Permalink to &quot;１：DSMとは&quot;">​</a></h2><p>DSMは、建物、橋などの構造物の高さを含めた標高値で，市街の3D地図を作成する際は，このデータを使用します．</p><blockquote><p>DSM は、建物、樹木、橋などの高さを含めた標高値を表示するデータモデルのことを指します。<br> 地表面だけでなく、その上に存在する地物の高さを加味した標高データが必要な場合は、DSM データを入手する必要があります。<br> 引用元：<a href="https://www.esrij.com/gis-guide/other-dataformat/elevation-data/" target="_blank" rel="noreferrer">GIS 基礎解説 標高データ</a></p></blockquote><br><h2 id="_2-データの入手" tabindex="-1">２：データの入手 <a class="header-anchor" href="#_2-データの入手" aria-label="Permalink to &quot;２：データの入手&quot;">​</a></h2><p><a href="https://www.geospatial.jp/ckan/dataset/2010-2018-hyogo-geo-potal" target="_blank" rel="noreferrer">兵庫県の数値地形データダウンロードページ</a>にアクセスして、DSMのデータをダウンロードします．</p><p>!(/image/dsm_DL.png) <br><br> 本稿では，地面の高さと建物の高さをわかりやすくするために，神戸市中央区の南京町やポートタワーがあるメッシュID「05OF89」を選択します．</p><p>メッシュIDの選択は<a href="https://www.geospatial.jp/ckan/dataset/2010-2018-hyogo-geo-dsm/resource/5473fd75-0bcc-423b-960d-99ab37b25bff" target="_blank" rel="noreferrer">兵庫県_DSMダウンロードページ</a>に移動した後，下記の地図上のメッシュを選択してダウンロードできます．</p><p>!(/image/dsm_DL_map.png)</p><p>データの中身は，以下のように空白区切りで「Y座標（経度） X座標（緯度） 高度」となっています．</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>78000.500 -145499.500 2.72</span></span>
<span class="line"><span>78001.500 -145499.500 2.23</span></span>
<span class="line"><span>78002.500 -145499.500 2.22</span></span>
<span class="line"><span>78003.500 -145499.500 2.40</span></span>
<span class="line"><span>78004.500 -145499.500 2.07</span></span></code></pre></div><p>ファイル構成は以下の通りです．</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>05of89</span></span>
<span class="line"><span>├── DSM_05OF891_1g.txt</span></span>
<span class="line"><span>├── DSM_05OF892_1g.txt</span></span>
<span class="line"><span>├── DSM_05OF893_1g.txt</span></span>
<span class="line"><span>└── DSM_05OF894_1g.txt</span></span></code></pre></div><br><h2 id="_3-dsmデータをqgisに読み込む" tabindex="-1">３：DSMデータをQGISに読み込む <a class="header-anchor" href="#_3-dsmデータをqgisに読み込む" aria-label="Permalink to &quot;３：DSMデータをQGISに読み込む&quot;">​</a></h2><p>ダウンロードしたDSMデータをQGIS3に読み込みます．</p><p>DSMデータはテキストファイルですので，メニューバーの「レイヤ-&gt;レイヤの追加-&gt;CSVテキストレイヤの追加」を選択します．</p><p>入力の設定は以下の通りです．</p><ul><li>文字コードはShift_JIS．日本の公共データはだいたいこれ．</li><li>ファイル形式は「カスタム区切り」の「空白」を選択</li><li>レコードとフィールドのオプションは「フィールド型の検出する」のみ．</li><li>X属性はfield_1，Y属性はfield_2，Z属性はfield_3</li><li>ジオメトリのCRSは「EPSG：2447」を指定</li></ul><p>!(/image/dsm_load.png)</p><p>読み込みが完了すると，長方形が表示されます．拡大すると，1mメッシュ間隔でポイントが表示され，ポイントデータであることが確認できます．</p><p>!(/image/dsm_point.png)<br></p><br><h2 id="_4-dsmデータを色分け" tabindex="-1">４：DSMデータを色分け <a class="header-anchor" href="#_4-dsmデータを色分け" aria-label="Permalink to &quot;４：DSMデータを色分け&quot;">​</a></h2><p>3D地図とかんけいありませんが，レイヤのプロパティからシンボロジから高度で色分けしてみます．</p><p>分類方法を「連続値による定義」で，カラムを「field_3」に指定します．</p><p>シンボルではストロークスタイルを「ペンなし」に変更し，シンボルの縁を描かないように設定します．(でないと，高度の色分けがシンボルの縁の色で塗り潰されます)</p><p>モードを「丸め間隔」に設定し10クラスで分類し，以下の地図を描画します． !(/image/dsm_class_setting.png)</p><p>やはり，山が高いので，黄色に着色されていますので，うまく色分けされているようです． !(/image/dsm_class.png)</p><br><h2 id="_5-まとめ" tabindex="-1">５：まとめ <a class="header-anchor" href="#_5-まとめ" aria-label="Permalink to &quot;５：まとめ&quot;">​</a></h2><p>兵庫県がオープンデータで「DSM」を公開しているので，QGISで標高で色分けした地図を描画しました</p><p>次回では，標高を考慮した3D地図を作成します．</p><h2 id="参考サイト" tabindex="-1">参考サイト <a class="header-anchor" href="#参考サイト" aria-label="Permalink to &quot;参考サイト&quot;">​</a></h2><p><a href="https://www.esrij.com/gis-guide/other-dataformat/elevation-data/" target="_blank" rel="noreferrer">GIS 基礎解説 標高データ</a></p><p><a href="https://note.com/kinari_iro/n/nd291716f021b" target="_blank" rel="noreferrer">【実習編】～兵庫県オープンデータ「DSM」をQGISで描画しよう～</a></p><p><a href="https://www.geospatial.jp/ckan/dataset/2010-2018-hyogo-geo-potal" target="_blank" rel="noreferrer">兵庫県_全域数値地形図_ポータル</a></p><p><a href="https://www.geospatial.jp/ckan/dataset/2010-2018-hyogo-geo-dsm/resource/5473fd75-0bcc-423b-960d-99ab37b25bff" target="_blank" rel="noreferrer">兵庫県_DSM</a></p>`,38)),e(t,null,{default:p(()=>[e(s)]),_:1})])}const D=l(c,[["render",_]]);export{u as __pageData,D as default};
